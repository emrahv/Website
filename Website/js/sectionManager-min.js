myApp.directive("mngSection", ["$http", "productService", "pageManagement", "$filter", function (e, t, a, l) { return { restrict: "E", scope: { id: "@", language: "@", imageCarouselData: "=", brandingpackagedata: "@", data: "@" }, link: function (e, t, a) { e.getContentUrl = function () { if (e.templateName) return "/pages/" + e.templateName + ".html" }, e.getResultData = function () { return e.resultData } }, controller: function (e, l, n) { e.smallCarousel = {}, e.smallCarousel.currentImage = 0, e.smallCarousel.setImage = function (t) { e.smallCarousel.currentImage = t }, e.getChildrenData = function () { t.getChildren(queryString.id, e.language).then(function (t) { e.resultData = t }) }, e.getRelatedProducts = function () { t.getRelatedProducts(queryString.id, e.language).then(function (t) { e.resultData = t }) }, e.getSectionDetails = function (t, l) { a.getSection(t, l).then(function (t) { e.resultData = t, e.templateName = e.resultData.templateName, e.resultData.dataModel = $.parseJSON(e.resultData.dataModel) }) }, e.getSection = function () { switch (e.resultData = $.parseJSON(e.data), e.templateName = e.resultData.templateName, e.resultData.dataModel && (e.resultData.dataModel = $.parseJSON(e.resultData.dataModel)), e.templateName) { case "childProducts": e.getChildrenData(); break; case "relatedProducts": e.sectionTitle = e.resultData.dataModel.title, e.getRelatedProducts(); break; case "imageCarousel": e.resultData = JSON.parse(e.brandingpackagedata) } }, e.data ? e.getSection() : e.imageCarouselData ? (e.templateName = "modelCarousel", e.resultData = e.imageCarouselData) : e.getSectionDetails(e.id, e.language), e.setClass = function (e) { if (e) return a.setClassByWidth(JSON.parse(e)) } }, template: '<div ng-include="getContentUrl()" ng-repeat="sectionData in [resultData]"></div>' } }]);